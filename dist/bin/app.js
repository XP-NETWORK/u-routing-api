import * as cdk from 'aws-cdk-lib';
import { SecretValue, Stack, Stage } from 'aws-cdk-lib';
import * as chatbot from 'aws-cdk-lib/aws-chatbot';
import { BuildEnvironmentVariableType } from 'aws-cdk-lib/aws-codebuild';
import { PipelineNotificationEvents } from 'aws-cdk-lib/aws-codepipeline';
import * as sm from 'aws-cdk-lib/aws-secretsmanager';
import { CodeBuildStep, CodePipeline, CodePipelineSource } from 'aws-cdk-lib/pipelines';
import dotenv from 'dotenv';
import 'source-map-support/register';
import { SUPPORTED_CHAINS } from '../lib/handlers/injector-sor';
import { STAGE } from '../lib/util/stage';
import { RoutingAPIStack } from './stacks/routing-api-stack';
dotenv.config();
export class RoutingAPIStage extends Stage {
    constructor(scope, id, props) {
        super(scope, id, props);
        const { jsonRpcProviders, provisionedConcurrency, ethGasStationInfoUrl, chatbotSNSArn, stage, internalApiKey, route53Arn, pinata_key, pinata_secret, hosted_zone, tenderlyUser, tenderlyProject, tenderlyAccessKey, unicornSecret, } = props;
        const { url } = new RoutingAPIStack(this, 'RoutingAPI', {
            jsonRpcProviders,
            provisionedConcurrency,
            ethGasStationInfoUrl,
            chatbotSNSArn,
            stage,
            internalApiKey,
            route53Arn,
            pinata_key,
            pinata_secret,
            hosted_zone,
            tenderlyUser,
            tenderlyProject,
            tenderlyAccessKey,
            unicornSecret,
        });
        this.url = url;
    }
}
export class RoutingAPIPipeline extends Stack {
    constructor(scope, id, props) {
        super(scope, id, props);
        const code = CodePipelineSource.gitHub('Uniswap/routing-api', 'main', {
            authentication: SecretValue.secretsManager('github-token-2'),
        });
        const synthStep = new CodeBuildStep('Synth', {
            input: code,
            buildEnvironment: {
                environmentVariables: {
                    NPM_TOKEN: {
                        value: 'npm-private-repo-access-token',
                        type: BuildEnvironmentVariableType.SECRETS_MANAGER,
                    },
                },
            },
            commands: [
                'echo "//registry.npmjs.org/:_authToken=${NPM_TOKEN}" > .npmrc && npm ci',
                'npm run build',
                'npx cdk synth',
            ],
        });
        const pipeline = new CodePipeline(this, 'RoutingAPIPipeline', {
            // The pipeline name
            pipelineName: 'RoutingAPI',
            crossAccountKeys: true,
            synth: synthStep,
        });
        // Secrets are stored in secrets manager in the pipeline account. Accounts we deploy to
        // have been granted permissions to access secrets via resource policies.
        const jsonRpcProvidersSecret = sm.Secret.fromSecretAttributes(this, 'RPCProviderUrls', {
            // The main secrets use our Infura RPC urls
            secretCompleteArn: 'arn:aws:secretsmanager:us-east-2:644039819003:secret:routing-api-rpc-urls-json-primary-ixS8mw',
            /*
            The backup secrets mostly use our Alchemy RPC urls
            However Alchemy does not support Rinkeby, Ropsten, and Kovan
            So those chains are set to our Infura RPC urls
            When switching to the backups,
            we must set the multicall chunk size to 50 so that optimism
            does not bug out on Alchemy's end
            */
            //secretCompleteArn: arn:aws:secretsmanager:us-east-2:644039819003:secret:routing-api-rpc-urls-json-backup-D2sWoe
        });
        // Secret that controls the access to the debugging query string params
        const unicornSecrets = sm.Secret.fromSecretAttributes(this, 'DebugConfigUnicornSecrets', {
            secretCompleteArn: 'arn:aws:secretsmanager:us-east-2:644039819003:secret:debug-config-unicornsecrets-jvmCsq',
        });
        const tenderlyCreds = sm.Secret.fromSecretAttributes(this, 'TenderlyCreds', {
            secretCompleteArn: 'arn:aws:secretsmanager:us-east-2:644039819003:secret:tenderly-api-wQaI2R',
        });
        const ethGasStationInfoUrl = sm.Secret.fromSecretAttributes(this, 'ETHGasStationUrl', {
            secretCompleteArn: 'arn:aws:secretsmanager:us-east-2:644039819003:secret:eth-gas-station-info-url-ulGncX',
        });
        const pinataApi = sm.Secret.fromSecretAttributes(this, 'PinataAPI', {
            secretCompleteArn: 'arn:aws:secretsmanager:us-east-2:644039819003:secret:pinata-api-key-UVLAfM',
        });
        const route53Arn = sm.Secret.fromSecretAttributes(this, 'Route53Arn', {
            secretCompleteArn: 'arn:aws:secretsmanager:us-east-2:644039819003:secret:Route53Arn-elRmmw',
        });
        const pinataSecret = sm.Secret.fromSecretAttributes(this, 'PinataSecret', {
            secretCompleteArn: 'arn:aws:secretsmanager:us-east-2:644039819003:secret:pinata-secret-svGaPt',
        });
        const hostedZone = sm.Secret.fromSecretAttributes(this, 'HostedZone', {
            secretCompleteArn: 'arn:aws:secretsmanager:us-east-2:644039819003:secret:hosted-zone-JmPDNV',
        });
        const internalApiKey = sm.Secret.fromSecretAttributes(this, 'internal-api-key', {
            secretCompleteArn: 'arn:aws:secretsmanager:us-east-2:644039819003:secret:routing-api-internal-api-key-Z68NmB',
        });
        // Parse AWS Secret
        let jsonRpcProviders = {};
        SUPPORTED_CHAINS.forEach((chainId) => {
            // TODO: Change this to `JSON_RPC_PROVIDER_${}` to be consistent with SOR
            const key = `WEB3_RPC_${chainId}`;
            jsonRpcProviders[key] = jsonRpcProvidersSecret.secretValueFromJson(key).toString();
        });
        // Beta us-east-2
        const betaUsEast2Stage = new RoutingAPIStage(this, 'beta-us-east-2', {
            env: { account: '697184420048', region: 'us-east-2' },
            jsonRpcProviders: jsonRpcProviders,
            internalApiKey: internalApiKey.secretValue.toString(),
            provisionedConcurrency: 10,
            ethGasStationInfoUrl: ethGasStationInfoUrl.secretValue.toString(),
            stage: STAGE.BETA,
            route53Arn: route53Arn.secretValueFromJson('arn').toString(),
            pinata_key: pinataApi.secretValueFromJson('pinata-api-key').toString(),
            pinata_secret: pinataSecret.secretValueFromJson('secret').toString(),
            hosted_zone: hostedZone.secretValueFromJson('zone').toString(),
            tenderlyUser: tenderlyCreds.secretValueFromJson('tenderly-user').toString(),
            tenderlyProject: tenderlyCreds.secretValueFromJson('tenderly-project').toString(),
            tenderlyAccessKey: tenderlyCreds.secretValueFromJson('tenderly-access-key').toString(),
            unicornSecret: unicornSecrets.secretValueFromJson('debug-config-unicorn-key').toString(),
        });
        const betaUsEast2AppStage = pipeline.addStage(betaUsEast2Stage);
        this.addIntegTests(code, betaUsEast2Stage, betaUsEast2AppStage);
        // Prod us-east-2
        const prodUsEast2Stage = new RoutingAPIStage(this, 'prod-us-east-2', {
            env: { account: '697184420048', region: 'us-east-2' },
            jsonRpcProviders: jsonRpcProviders,
            internalApiKey: internalApiKey.secretValue.toString(),
            provisionedConcurrency: 1000,
            ethGasStationInfoUrl: ethGasStationInfoUrl.secretValue.toString(),
            chatbotSNSArn: 'arn:aws:sns:us-east-2:644039819003:SlackChatbotTopic',
            stage: STAGE.PROD,
            route53Arn: route53Arn.secretValueFromJson('arn').toString(),
            pinata_key: pinataApi.secretValueFromJson('pinata-api-key').toString(),
            pinata_secret: pinataSecret.secretValueFromJson('secret').toString(),
            hosted_zone: hostedZone.secretValueFromJson('zone').toString(),
            tenderlyUser: tenderlyCreds.secretValueFromJson('tenderly-user').toString(),
            tenderlyProject: tenderlyCreds.secretValueFromJson('tenderly-project').toString(),
            tenderlyAccessKey: tenderlyCreds.secretValueFromJson('tenderly-access-key').toString(),
            unicornSecret: unicornSecrets.secretValueFromJson('debug-config-unicorn-key').toString(),
        });
        const prodUsEast2AppStage = pipeline.addStage(prodUsEast2Stage);
        this.addIntegTests(code, prodUsEast2Stage, prodUsEast2AppStage);
        const slackChannel = chatbot.SlackChannelConfiguration.fromSlackChannelConfigurationArn(this, 'SlackChannel', 'arn:aws:chatbot::644039819003:chat-configuration/slack-channel/eng-ops-slack-chatbot');
        pipeline.buildPipeline();
        pipeline.pipeline.notifyOn('NotifySlack', slackChannel, {
            events: [PipelineNotificationEvents.PIPELINE_EXECUTION_FAILED],
        });
    }
    addIntegTests(sourceArtifact, routingAPIStage, applicationStage) {
        const testAction = new CodeBuildStep(`IntegTests-${routingAPIStage.stageName}`, {
            projectName: `IntegTests-${routingAPIStage.stageName}`,
            input: sourceArtifact,
            envFromCfnOutputs: {
                UNISWAP_ROUTING_API: routingAPIStage.url,
            },
            buildEnvironment: {
                environmentVariables: {
                    NPM_TOKEN: {
                        value: 'npm-private-repo-access-token',
                        type: BuildEnvironmentVariableType.SECRETS_MANAGER,
                    },
                    ARCHIVE_NODE_RPC: {
                        value: 'archive-node-rpc-url-default-kms',
                        type: BuildEnvironmentVariableType.SECRETS_MANAGER,
                    },
                },
            },
            commands: [
                'echo "//registry.npmjs.org/:_authToken=${NPM_TOKEN}" > .npmrc && npm ci',
                'echo "UNISWAP_ROUTING_API=${UNISWAP_ROUTING_API}" > .env',
                'echo "ARCHIVE_NODE_RPC=${ARCHIVE_NODE_RPC}" >> .env',
                'npm install',
                'npm run build',
                'npm run integ-test',
            ],
        });
        applicationStage.addPost(testAction);
    }
}
const app = new cdk.App();
const jsonRpcProviders = {
    WEB3_RPC_1: process.env.JSON_RPC_PROVIDER_1,
    WEB3_RPC_3: process.env.JSON_RPC_PROVIDER_3,
    WEB3_RPC_4: process.env.JSON_RPC_PROVIDER_4,
    WEB3_RPC_5: process.env.JSON_RPC_PROVIDER_5,
    WEB3_RPC_42: process.env.JSON_RPC_PROVIDER_42,
    WEB3_RPC_10: process.env.JSON_RPC_PROVIDER_10,
    WEB3_RPC_69: process.env.JSON_RPC_PROVIDER_69,
    WEB3_RPC_42161: process.env.JSON_RPC_PROVIDER_42161,
    WEB3_RPC_421611: process.env.JSON_RPC_PROVIDER_421611,
    WEB3_RPC_11155111: process.env.JSON_RPC_PROVIDER_11155111,
    WEB3_RPC_421613: process.env.JSON_RPC_PROVIDER_421613,
    WEB3_RPC_137: process.env.JSON_RPC_PROVIDER_137,
    WEB3_RPC_80001: process.env.JSON_RPC_PROVIDER_80001,
    WEB3_RPC_97: process.env.JSON_RPC_PROVIDER_97,
    WEB3_RPC_42220: process.env.JSON_RPC_PROVIDER_42220,
    WEB3_RPC_44787: process.env.JSON_RPC_PROVIDER_44787,
    WEB3_RPC_56: process.env.JSON_RPC_PROVIDER_56,
    WEB3_RPC_43114: process.env.JSON_RPC_PROVIDER_43114,
    WEB3_RPC_8453: process.env.JSON_RPC_PROVIDER_8453,
};
// Local dev stack
new RoutingAPIStack(app, 'RoutingAPIStack', {
    jsonRpcProviders: jsonRpcProviders,
    provisionedConcurrency: process.env.PROVISION_CONCURRENCY ? parseInt(process.env.PROVISION_CONCURRENCY) : 0,
    throttlingOverride: process.env.THROTTLE_PER_FIVE_MINS,
    ethGasStationInfoUrl: process.env.ETH_GAS_STATION_INFO_URL,
    chatbotSNSArn: process.env.CHATBOT_SNS_ARN,
    stage: STAGE.LOCAL,
    internalApiKey: 'test-api-key',
    route53Arn: process.env.ROLE_ARN,
    pinata_key: process.env.PINATA_API_KEY,
    pinata_secret: process.env.PINATA_API_SECRET,
    hosted_zone: process.env.HOSTED_ZONE,
    tenderlyUser: process.env.TENDERLY_USER,
    tenderlyProject: process.env.TENDERLY_PROJECT,
    tenderlyAccessKey: process.env.TENDERLY_ACCESS_KEY,
    unicornSecret: process.env.UNICORN_SECRET,
});
new RoutingAPIPipeline(app, 'RoutingAPIPipelineStack', {
    env: { account: '697184420048', region: 'us-east-2' },
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXBwLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vYmluL2FwcC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFDQSxPQUFPLEtBQUssR0FBRyxNQUFNLGFBQWEsQ0FBQTtBQUNsQyxPQUFPLEVBQWEsV0FBVyxFQUFFLEtBQUssRUFBYyxLQUFLLEVBQWMsTUFBTSxhQUFhLENBQUE7QUFDMUYsT0FBTyxLQUFLLE9BQU8sTUFBTSx5QkFBeUIsQ0FBQTtBQUNsRCxPQUFPLEVBQUUsNEJBQTRCLEVBQUUsTUFBTSwyQkFBMkIsQ0FBQTtBQUN4RSxPQUFPLEVBQUUsMEJBQTBCLEVBQUUsTUFBTSw4QkFBOEIsQ0FBQTtBQUN6RSxPQUFPLEtBQUssRUFBRSxNQUFNLGdDQUFnQyxDQUFBO0FBQ3BELE9BQU8sRUFBRSxhQUFhLEVBQUUsWUFBWSxFQUFFLGtCQUFrQixFQUFFLE1BQU0sdUJBQXVCLENBQUE7QUFFdkYsT0FBTyxNQUFNLE1BQU0sUUFBUSxDQUFBO0FBQzNCLE9BQU8sNkJBQTZCLENBQUE7QUFDcEMsT0FBTyxFQUFFLGdCQUFnQixFQUFFLE1BQU0sOEJBQThCLENBQUE7QUFDL0QsT0FBTyxFQUFFLEtBQUssRUFBRSxNQUFNLG1CQUFtQixDQUFBO0FBQ3pDLE9BQU8sRUFBRSxlQUFlLEVBQUUsTUFBTSw0QkFBNEIsQ0FBQTtBQUM1RCxNQUFNLENBQUMsTUFBTSxFQUFFLENBQUE7QUFFZixNQUFNLE9BQU8sZUFBZ0IsU0FBUSxLQUFLO0lBR3hDLFlBQ0UsS0FBZ0IsRUFDaEIsRUFBVSxFQUNWLEtBZUM7UUFFRCxLQUFLLENBQUMsS0FBSyxFQUFFLEVBQUUsRUFBRSxLQUFLLENBQUMsQ0FBQTtRQUN2QixNQUFNLEVBQ0osZ0JBQWdCLEVBQ2hCLHNCQUFzQixFQUN0QixvQkFBb0IsRUFDcEIsYUFBYSxFQUNiLEtBQUssRUFDTCxjQUFjLEVBQ2QsVUFBVSxFQUNWLFVBQVUsRUFDVixhQUFhLEVBQ2IsV0FBVyxFQUNYLFlBQVksRUFDWixlQUFl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QUFPLENBQUMsR0FBRyxDQUFDLHNCQUFzQjtJQUN0RCxvQkFBb0IsRUFBRSxPQUFPLENBQUMsR0FBRyxDQUFDLHdCQUF5QjtJQUMzRCxhQUFhLEVBQUUsT0FBTyxDQUFDLEdBQUcsQ0FBQyxlQUFlO0lBQzFDLEtBQUssRUFBRSxLQUFLLENBQUMsS0FBSztJQUNsQixjQUFjLEVBQUUsY0FBYztJQUM5QixVQUFVLEVBQUUsT0FBTyxDQUFDLEdBQUcsQ0FBQyxRQUFRO0lBQ2hDLFVBQVUsRUFBRSxPQUFPLENBQUMsR0FBRyxDQUFDLGNBQWU7SUFDdkMsYUFBYSxFQUFFLE9BQU8sQ0FBQyxHQUFHLENBQUMsaUJBQWtCO0lBQzdDLFdBQVcsRUFBRSxPQUFPLENBQUMsR0FBRyxDQUFDLFdBQVk7SUFDckMsWUFBWSxFQUFFLE9BQU8sQ0FBQyxHQUFHLENBQUMsYUFBYztJQUN4QyxlQUFlLEVBQUUsT0FBTyxDQUFDLEdBQUcsQ0FBQyxnQkFBaUI7SUFDOUMsaUJBQWlCLEVBQUUsT0FBTyxDQUFDLEdBQUcsQ0FBQyxtQkFBb0I7SUFDbkQsYUFBYSxFQUFFLE9BQU8sQ0FBQyxHQUFHLENBQUMsY0FBZTtDQUMzQyxDQUFDLENBQUE7QUFFRixJQUFJLGtCQUFrQixDQUFDLEdBQUcsRUFBRSx5QkFBeUIsRUFBRTtJQUNyRCxHQUFHLEVBQUUsRUFBRSxPQUFPLEVBQUUsY0FBYyxFQUFFLE1BQU0sRUFBRSxXQUFXLEVBQUU7Q0FDdEQsQ0FBQyxDQUFBIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ2hhaW5JZCB9IGZyb20gJ0B1bmlzd2FwL3Nkay1jb3JlJ1xuaW1wb3J0ICogYXMgY2RrIGZyb20gJ2F3cy1jZGstbGliJ1xuaW1wb3J0IHsgQ2ZuT3V0cHV0LCBTZWNyZXRWYWx1ZSwgU3RhY2ssIFN0YWNrUHJvcHMsIFN0YWdlLCBTdGFnZVByb3BzIH0gZnJvbSAnYXdzLWNkay1saWInXG5pbXBvcnQgKiBhcyBjaGF0Ym90IGZyb20gJ2F3cy1jZGstbGliL2F3cy1jaGF0Ym90J1xuaW1wb3J0IHsgQnVpbGRFbnZpcm9ubWVudFZhcmlhYmxlVHlwZSB9IGZyb20gJ2F3cy1jZGstbGliL2F3cy1jb2RlYnVpbGQnXG5pbXBvcnQgeyBQaXBlbGluZU5vdGlmaWNhdGlvbkV2ZW50cyB9IGZyb20gJ2F3cy1jZGstbGliL2F3cy1jb2RlcGlwZWxpbmUnXG5pbXBvcnQgKiBhcyBzbSBmcm9tICdhd3MtY2RrLWxpYi9hd3Mtc2VjcmV0c21hbmFnZXInXG5pbXBvcnQgeyBDb2RlQnVpbGRTdGVwLCBDb2RlUGlwZWxpbmUsIENvZGVQaXBlbGluZVNvdXJjZSB9IGZyb20gJ2F3cy1jZGstbGliL3BpcGVsaW5lcydcbmltcG9ydCB7IENvbnN0cnVjdCB9IGZyb20gJ2NvbnN0cnVjdHMnXG5pbXBvcnQgZG90ZW52IGZyb20gJ2RvdGVudidcbmltcG9ydCAnc291cmNlLW1hcC1zdXBwb3J0L3JlZ2lzdGVyJ1xuaW1wb3J0IHsgU1VQUE9SVEVEX0NIQUlOUyB9IGZyb20gJy4uL2xpYi9oYW5kbGVycy9pbmplY3Rvci1zb3InXG5pbXBvcnQgeyBTVEFHRSB9IGZyb20gJy4uL2xpYi91dGlsL3N0YWdlJ1xuaW1wb3J0IHsgUm91dGluZ0FQSVN0YWNrIH0gZnJvbSAnLi9zdGFja3Mvcm91dGluZy1hcGktc3RhY2snXG5kb3RlbnYuY29uZmlnKClcblxuZXhwb3J0IGNsYXNzIFJvdXRpbmdBUElTdGFnZSBleHRlbmRzIFN0YWdlIHtcbiAgcHVibGljIHJlYWRvbmx5IHVybDogQ2ZuT3V0cHV0XG5cbiAgY29uc3RydWN0b3IoXG4gICAgc2NvcGU6IENvbnN0cnVjdCxcbiAgICBpZDogc3RyaW5nLFxuICAgIHByb3BzOiBTdGFnZVByb3BzICYge1xuICAgICAganNvblJwY1Byb3ZpZGVyczogeyBbY2hhaW5OYW1lOiBzdHJpbmddOiBzdHJpbmcgfVxuICAgICAgcHJvdmlzaW9uZWRDb25jdXJyZW5jeTogbnVtYmVyXG4gICAgICBldGhHYXNTdGF0aW9uSW5mb1VybDogc3RyaW5nXG4gICAgICBjaGF0Ym90U05TQXJuPzogc3RyaW5nXG4gICAgICBzdGFnZTogc3RyaW5nXG4gICAgICBpbnRlcm5hbEFwaUtleT86IHN0cmluZ1xuICAgICAgcm91dGU1M0Fybj86IHN0cmluZ1xuICAgICAgcGluYXRhX2tleT86IHN0cmluZ1xuICAgICAgcGluYXRhX3NlY3JldD86IHN0cmluZ1xuICAgICAgaG9zdGVkX3pvbmU/OiBzdHJpbmdcbiAgICAgIHRlbmRlcmx5VXNlcjogc3RyaW5nXG4gICAgICB0ZW5kZXJseVByb2plY3Q6IHN0cmluZ1xuICAgICAgdGVuZGVybHlBY2Nlc3NLZXk6IHN0cmluZ1xuICAgICAgdW5pY29yblNlY3JldDogc3RyaW5nXG4gICAgfVxuICApIHtcbiAgICBzdXBlcihzY29wZSwgaWQsIHByb3BzKVxuICAgIGNvbnN0IHtcbiAgICAgIGpzb25ScGNQcm92aWRlcnMsXG4gICAgICBwcm92aXNpb25lZENvbmN1cnJlbmN5LFxuICAgICAgZXRoR2FzU3RhdGlvbkluZm9VcmwsXG4gICAgICBjaGF0Ym90U05TQXJuLFxuICAgICAgc3RhZ2UsXG4gICAgICBpbnRlcm5hbEFwaUtleSxcbiAgICAgIHJvdXRlNTNBcm4sXG4gICAgICBwaW5hdGFfa2V5LFxuICAgICAgcGluYXRhX3NlY3JldCxcbiAgICAgIGhvc3RlZF96b25lLFxuICAgICAgdGVuZGVybHlVc2VyLFxuICAgICAgdGVuZGVybHlQcm9qZWN0LFxuICAgICAgdGVuZGVybHlBY2Nlc3NLZXksXG4gICAgICB1bmljb3JuU2VjcmV0LFxuICAgIH0gPSBwcm9wc1xuXG4gICAgY29uc3QgeyB1cmwgfSA9IG5ldyBSb3V0aW5nQVBJU3RhY2sodGhpcywgJ1JvdXRpbmdBUEknLCB7XG4gICAgICBqc29uUnBjUHJvdmlkZXJzLFxuICAgICAgcHJvdmlzaW9uZWRDb25jdXJyZW5jeSxcbiAgICAgIGV0aEdhc1N0YXRpb25JbmZvVXJsLFxuICAgICAgY2hhdGJvdFNOU0FybixcbiAgICAgIHN0YWdlLFxuICAgICAgaW50ZXJuYWxBcGlLZXksXG4gICAgICByb3V0ZTUzQXJuLFxuICAgICAgcGluYXRhX2tleSxcbiAgICAgIHBpbmF0YV9zZWNyZXQsXG4gICAgICBob3N0ZWRfem9uZSxcbiAgICAgIHRlbmRlcmx5VXNlcixcbiAgICAgIHRlbmRlcmx5UHJvamVjdCxcbiAgICAgIHRlbmRlcmx5QWNjZXNzS2V5LFxuICAgICAgdW5pY29yblNlY3JldCxcbiAgICB9KVxuICAgIHRoaXMudXJsID0gdXJsXG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIFJvdXRpbmdBUElQaXBlbGluZSBleHRlbmRzIFN0YWNrIHtcbiAgY29uc3RydWN0b3Ioc2NvcGU6IENvbnN0cnVjdCwgaWQ6IHN0cmluZywgcHJvcHM/OiBTdGFja1Byb3BzKSB7XG4gICAgc3VwZXIoc2NvcGUsIGlkLCBwcm9wcylcblxuICAgIGNvbnN0IGNvZGUgPSBDb2RlUGlwZWxpbmVTb3VyY2UuZ2l0SHViKCdVbmlzd2FwL3JvdXRpbmctYXBpJywgJ21haW4nLCB7XG4gICAgICBhdXRoZW50aWNhdGlvbjogU2VjcmV0VmFsdWUuc2VjcmV0c01hbmFnZXIoJ2dpdGh1Yi10b2tlbi0yJyksXG4gICAgfSlcblxuICAgIGNvbnN0IHN5bnRoU3RlcCA9IG5ldyBDb2RlQnVpbGRTdGVwKCdTeW50aCcsIHtcbiAgICAgIGlucHV0OiBjb2RlLFxuICAgICAgYnVpbGRFbnZpcm9ubWVudDoge1xuICAgICAgICBlbnZpcm9ubWVudFZhcmlhYmxlczoge1xuICAgICAgICAgIE5QTV9UT0tFTjoge1xuICAgICAgICAgICAgdmFsdWU6ICducG0tcHJpdmF0ZS1yZXBvLWFjY2Vzcy10b2tlbicsXG4gICAgICAgICAgICB0eXBlOiBCdWlsZEVudmlyb25tZW50VmFyaWFibGVUeXBlLlNFQ1JFVFNfTUFOQUdFUixcbiAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgfSxcbiAgICAgIGNvbW1hbmRzOiBbXG4gICAgICAgICdlY2hvIFwiLy9yZWdpc3RyeS5ucG1qcy5vcmcvOl9hdXRoVG9rZW49JHtOUE1fVE9LRU59XCIgPiAubnBtcmMgJiYgbnBtIGNpJyxcbiAgICAgICAgJ25wbSBydW4gYnVpbGQnLFxuICAgICAgICAnbnB4IGNkayBzeW50aCcsXG4gICAgICBdLFxuICAgIH0pXG5cbiAgICBjb25zdCBwaXBlbGluZSA9IG5ldyBDb2RlUGlwZWxpbmUodGhpcywgJ1JvdXRpbmdBUElQaXBlbGluZScsIHtcbiAgICAgIC8vIFRoZSBwaXBlbGluZSBuYW1lXG4gICAgICBwaXBlbGluZU5hbWU6ICdSb3V0aW5nQVBJJyxcbiAgICAgIGNyb3NzQWNjb3VudEtleXM6IHRydWUsXG4gICAgICBzeW50aDogc3ludGhTdGVwLFxuICAgIH0pXG5cbiAgICAvLyBTZWNyZXRzIGFyZSBzdG9yZWQgaW4gc2VjcmV0cyBtYW5hZ2VyIGluIHRoZSBwaXBlbGluZSBhY2NvdW50LiBBY2NvdW50cyB3ZSBkZXBsb3kgdG9cbiAgICAvLyBoYXZlIGJlZW4gZ3JhbnRlZCBwZXJtaXNzaW9ucyB0byBhY2Nlc3Mgc2VjcmV0cyB2aWEgcmVzb3VyY2UgcG9saWNpZXMuXG5cbiAgICBjb25zdCBqc29uUnBjUHJvdmlkZXJzU2VjcmV0ID0gc20uU2VjcmV0LmZyb21TZWNyZXRBdHRyaWJ1dGVzKHRoaXMsICdSUENQcm92aWRlclVybHMnLCB7XG4gICAgICAvLyBUaGUgbWFpbiBzZWNyZXRzIHVzZSBvdXIgSW5mdXJhIFJQQyB1cmxzXG4gICAgICBzZWNyZXRDb21wbGV0ZUFybjpcbiAgICAgICAgJ2Fybjphd3M6c2VjcmV0c21hbmFnZXI6dXMtZWFzdC0yOjY0NDAzOTgxOTAwMzpzZWNyZXQ6cm91dGluZy1hcGktcnBjLXVybHMtanNvbi1wcmltYXJ5LWl4UzhtdycsXG5cbiAgICAgIC8qXG4gICAgICBUaGUgYmFja3VwIHNlY3JldHMgbW9zdGx5IHVzZSBvdXIgQWxjaGVteSBSUEMgdXJsc1xuICAgICAgSG93ZXZlciBBbGNoZW15IGRvZXMgbm90IHN1cHBvcnQgUmlua2VieSwgUm9wc3RlbiwgYW5kIEtvdmFuXG4gICAgICBTbyB0aG9zZSBjaGFpbnMgYXJlIHNldCB0byBvdXIgSW5mdXJhIFJQQyB1cmxzXG4gICAgICBXaGVuIHN3aXRjaGluZyB0byB0aGUgYmFja3VwcyxcbiAgICAgIHdlIG11c3Qgc2V0IHRoZSBtdWx0aWNhbGwgY2h1bmsgc2l6ZSB0byA1MCBzbyB0aGF0IG9wdGltaXNtXG4gICAgICBkb2VzIG5vdCBidWcgb3V0IG9uIEFsY2hlbXkncyBlbmRcbiAgICAgICovXG4gICAgICAvL3NlY3JldENvbXBsZXRlQXJuOiBhcm46YXdzOnNlY3JldHNtYW5hZ2VyOnVzLWVhc3QtMjo2NDQwMzk4MTkwMDM6c2VjcmV0OnJvdXRpbmctYXBpLXJwYy11cmxzLWpzb24tYmFja3VwLUQyc1dvZVxuICAgIH0pXG5cbiAgICAvLyBTZWNyZXQgdGhhdCBjb250cm9scyB0aGUgYWNjZXNzIHRvIHRoZSBkZWJ1Z2dpbmcgcXVlcnkgc3RyaW5nIHBhcmFtc1xuICAgIGNvbnN0IHVuaWNvcm5TZWNyZXRzID0gc20uU2VjcmV0LmZyb21TZWNyZXRBdHRyaWJ1dGVzKHRoaXMsICdEZWJ1Z0NvbmZpZ1VuaWNvcm5TZWNyZXRzJywge1xuICAgICAgc2VjcmV0Q29tcGxldGVBcm46ICdhcm46YXdzOnNlY3JldHNtYW5hZ2VyOnVzLWVhc3QtMjo2NDQwMzk4MTkwMDM6c2VjcmV0OmRlYnVnLWNvbmZpZy11bmljb3Juc2VjcmV0cy1qdm1Dc3EnLFxuICAgIH0pXG5cbiAgICBjb25zdCB0ZW5kZXJseUNyZWRzID0gc20uU2VjcmV0LmZyb21TZWNyZXRBdHRyaWJ1dGVzKHRoaXMsICdUZW5kZXJseUNyZWRzJywge1xuICAgICAgc2VjcmV0Q29tcGxldGVBcm46ICdhcm46YXdzOnNlY3JldHNtYW5hZ2VyOnVzLWVhc3QtMjo2NDQwMzk4MTkwMDM6c2VjcmV0OnRlbmRlcmx5LWFwaS13UWFJMlInLFxuICAgIH0pXG5cbiAgICBjb25zdCBldGhHYXNTdGF0aW9uSW5mb1VybCA9IHNtLlNlY3JldC5mcm9tU2VjcmV0QXR0cmlidXRlcyh0aGlzLCAnRVRIR2FzU3RhdGlvblVybCcsIHtcbiAgICAgIHNlY3JldENvbXBsZXRlQXJuOiAnYXJuOmF3czpzZWNyZXRzbWFuYWdlcjp1cy1lYXN0LTI6NjQ0MDM5ODE5MDAzOnNlY3JldDpldGgtZ2FzLXN0YXRpb24taW5mby11cmwtdWxHbmNYJyxcbiAgICB9KVxuXG4gICAgY29uc3QgcGluYXRhQXBpID0gc20uU2VjcmV0LmZyb21TZWNyZXRBdHRyaWJ1dGVzKHRoaXMsICdQaW5hdGFBUEknLCB7XG4gICAgICBzZWNyZXRDb21wbGV0ZUFybjogJ2Fybjphd3M6c2VjcmV0c21hbmFnZXI6dXMtZWFzdC0yOjY0NDAzOTgxOTAwMzpzZWNyZXQ6cGluYXRhLWFwaS1rZXktVVZMQWZNJyxcbiAgICB9KVxuICAgIGNvbnN0IHJvdXRlNTNBcm4gPSBzbS5TZWNyZXQuZnJvbVNlY3JldEF0dHJpYnV0ZXModGhpcywgJ1JvdXRlNTNBcm4nLCB7XG4gICAgICBzZWNyZXRDb21wbGV0ZUFybjogJ2Fybjphd3M6c2VjcmV0c21hbmFnZXI6dXMtZWFzdC0yOjY0NDAzOTgxOTAwMzpzZWNyZXQ6Um91dGU1M0Fybi1lbFJtbXcnLFxuICAgIH0pXG5cbiAgICBjb25zdCBwaW5hdGFTZWNyZXQgPSBzbS5TZWNyZXQuZnJvbVNlY3JldEF0dHJpYnV0ZXModGhpcywgJ1BpbmF0YVNlY3JldCcsIHtcbiAgICAgIHNlY3JldENvbXBsZXRlQXJuOiAnYXJuOmF3czpzZWNyZXRzbWFuYWdlcjp1cy1lYXN0LTI6NjQ0MDM5ODE5MDAzOnNlY3JldDpwaW5hdGEtc2VjcmV0LXN2R2FQdCcsXG4gICAgfSlcblxuICAgIGNvbnN0IGhvc3RlZFpvbmUgPSBzbS5TZWNyZXQuZnJvbVNlY3JldEF0dHJpYnV0ZXModGhpcywgJ0hvc3RlZFpvbmUnLCB7XG4gICAgICBzZWNyZXRDb21wbGV0ZUFybjogJ2Fybjphd3M6c2VjcmV0c21hbmFnZXI6dXMtZWFzdC0yOjY0NDAzOTgxOTAwMzpzZWNyZXQ6aG9zdGVkLXpvbmUtSm1QRE5WJyxcbiAgICB9KVxuXG4gICAgY29uc3QgaW50ZXJuYWxBcGlLZXkgPSBzbS5TZWNyZXQuZnJvbVNlY3JldEF0dHJpYnV0ZXModGhpcywgJ2ludGVybmFsLWFwaS1rZXknLCB7XG4gICAgICBzZWNyZXRDb21wbGV0ZUFybjogJ2Fybjphd3M6c2VjcmV0c21hbmFnZXI6dXMtZWFzdC0yOjY0NDAzOTgxOTAwMzpzZWNyZXQ6cm91dGluZy1hcGktaW50ZXJuYWwtYXBpLWtleS1aNjhObUInLFxuICAgIH0pXG5cbiAgICAvLyBQYXJzZSBBV1MgU2VjcmV0XG4gICAgbGV0IGpzb25ScGNQcm92aWRlcnMgPSB7fSBhcyB7IFtjaGFpbklkOiBzdHJpbmddOiBzdHJpbmcgfVxuICAgIFNVUFBPUlRFRF9DSEFJTlMuZm9yRWFjaCgoY2hhaW5JZDogQ2hhaW5JZCkgPT4ge1xuICAgICAgLy8gVE9ETzogQ2hhbmdlIHRoaXMgdG8gYEpTT05fUlBDX1BST1ZJREVSXyR7fWAgdG8gYmUgY29uc2lzdGVudCB3aXRoIFNPUlxuICAgICAgY29uc3Qga2V5ID0gYFdFQjNfUlBDXyR7Y2hhaW5JZH1gXG4gICAgICBqc29uUnBjUHJvdmlkZXJzW2tleV0gPSBqc29uUnBjUHJvdmlkZXJzU2VjcmV0LnNlY3JldFZhbHVlRnJvbUpzb24oa2V5KS50b1N0cmluZygpXG4gICAgfSlcblxuICAgIC8vIEJldGEgdXMtZWFzdC0yXG4gICAgY29uc3QgYmV0YVVzRWFzdDJTdGFnZSA9IG5ldyBSb3V0aW5nQVBJU3RhZ2UodGhpcywgJ2JldGEtdXMtZWFzdC0yJywge1xuICAgICAgZW52OiB7IGFjY291bnQ6ICc2OTcxODQ0MjAwNDgnLCByZWdpb246ICd1cy1lYXN0LTInIH0sXG4gICAgICBqc29uUnBjUHJvdmlkZXJzOiBqc29uUnBjUHJvdmlkZXJzLFxuICAgICAgaW50ZXJuYWxBcGlLZXk6IGludGVybmFsQXBpS2V5LnNlY3JldFZhbHVlLnRvU3RyaW5nKCksXG4gICAgICBwcm92aXNpb25lZENvbmN1cnJlbmN5OiAxMCxcbiAgICAgIGV0aEdhc1N0YXRpb25JbmZvVXJsOiBldGhHYXNTdGF0aW9uSW5mb1VybC5zZWNyZXRWYWx1ZS50b1N0cmluZygpLFxuICAgICAgc3RhZ2U6IFNUQUdFLkJFVEEsXG4gICAgICByb3V0ZTUzQXJuOiByb3V0ZTUzQXJuLnNlY3JldFZhbHVlRnJvbUpzb24oJ2FybicpLnRvU3RyaW5nKCksXG4gICAgICBwaW5hdGFfa2V5OiBwaW5hdGFBcGkuc2VjcmV0VmFsdWVGcm9tSnNvbigncGluYXRhLWFwaS1rZXknKS50b1N0cmluZygpLFxuICAgICAgcGluYXRhX3NlY3JldDogcGluYXRhU2VjcmV0LnNlY3JldFZhbHVlRnJvbUpzb24oJ3NlY3JldCcpLnRvU3RyaW5nKCksXG4gICAgICBob3N0ZWRfem9uZTogaG9zdGVkWm9uZS5zZWNyZXRWYWx1ZUZyb21Kc29uKCd6b25lJykudG9TdHJpbmcoKSxcbiAgICAgIHRlbmRlcmx5VXNlcjogdGVuZGVybHlDcmVkcy5zZWNyZXRWYWx1ZUZyb21Kc29uKCd0ZW5kZXJseS11c2VyJykudG9TdHJpbmcoKSxcbiAgICAgIHRlbmRlcmx5UHJvamVjdDogdGVuZGVybHlDcmVkcy5zZWNyZXRWYWx1ZUZyb21Kc29uKCd0ZW5kZXJseS1wcm9qZWN0JykudG9TdHJpbmcoKSxcbiAgICAgIHRlbmRlcmx5QWNjZXNzS2V5OiB0ZW5kZXJseUNyZWRzLnNlY3JldFZhbHVlRnJvbUpzb24oJ3RlbmRlcmx5LWFjY2Vzcy1rZXknKS50b1N0cmluZygpLFxuICAgICAgdW5pY29yblNlY3JldDogdW5pY29yblNlY3JldHMuc2VjcmV0VmFsdWVGcm9tSnNvbignZGVidWctY29uZmlnLXVuaWNvcm4ta2V5JykudG9TdHJpbmcoKSxcbiAgICB9KVxuXG4gICAgY29uc3QgYmV0YVVzRWFzdDJBcHBTdGFnZSA9IHBpcGVsaW5lLmFkZFN0YWdlKGJldGFVc0Vhc3QyU3RhZ2UpXG5cbiAgICB0aGlzLmFkZEludGVnVGVzdHMoY29kZSwgYmV0YVVzRWFzdDJTdGFnZSwgYmV0YVVzRWFzdDJBcHBTdGFnZSlcblxuICAgIC8vIFByb2QgdXMtZWFzdC0yXG4gICAgY29uc3QgcHJvZFVzRWFzdDJTdGFnZSA9IG5ldyBSb3V0aW5nQVBJU3RhZ2UodGhpcywgJ3Byb2QtdXMtZWFzdC0yJywge1xuICAgICAgZW52OiB7IGFjY291bnQ6ICc2OTcxODQ0MjAwNDgnLCByZWdpb246ICd1cy1lYXN0LTInIH0sXG4gICAgICBqc29uUnBjUHJvdmlkZXJzOiBqc29uUnBjUHJvdmlkZXJzLFxuICAgICAgaW50ZXJuYWxBcGlLZXk6IGludGVybmFsQXBpS2V5LnNlY3JldFZhbHVlLnRvU3RyaW5nKCksXG4gICAgICBwcm92aXNpb25lZENvbmN1cnJlbmN5OiAxMDAwLFxuICAgICAgZXRoR2FzU3RhdGlvbkluZm9Vcmw6IGV0aEdhc1N0YXRpb25JbmZvVXJsLnNlY3JldFZhbHVlLnRvU3RyaW5nKCksXG4gICAgICBjaGF0Ym90U05TQXJuOiAnYXJuOmF3czpzbnM6dXMtZWFzdC0yOjY0NDAzOTgxOTAwMzpTbGFja0NoYXRib3RUb3BpYycsXG4gICAgICBzdGFnZTogU1RBR0UuUFJPRCxcbiAgICAgIHJvdXRlNTNBcm46IHJvdXRlNTNBcm4uc2VjcmV0VmFsdWVGcm9tSnNvbignYXJuJykudG9TdHJpbmcoKSxcbiAgICAgIHBpbmF0YV9rZXk6IHBpbmF0YUFwaS5zZWNyZXRWYWx1ZUZyb21Kc29uKCdwaW5hdGEtYXBpLWtleScpLnRvU3RyaW5nKCksXG4gICAgICBwaW5hdGFfc2VjcmV0OiBwaW5hdGFTZWNyZXQuc2VjcmV0VmFsdWVGcm9tSnNvbignc2VjcmV0JykudG9TdHJpbmcoKSxcbiAgICAgIGhvc3RlZF96b25lOiBob3N0ZWRab25lLnNlY3JldFZhbHVlRnJvbUpzb24oJ3pvbmUnKS50b1N0cmluZygpLFxuICAgICAgdGVuZGVybHlVc2VyOiB0ZW5kZXJseUNyZWRzLnNlY3JldFZhbHVlRnJvbUpzb24oJ3RlbmRlcmx5LXVzZXInKS50b1N0cmluZygpLFxuICAgICAgdGVuZGVybHlQcm9qZWN0OiB0ZW5kZXJseUNyZWRzLnNlY3JldFZhbHVlRnJvbUpzb24oJ3RlbmRlcmx5LXByb2plY3QnKS50b1N0cmluZygpLFxuICAgICAgdGVuZGVybHlBY2Nlc3NLZXk6IHRlbmRlcmx5Q3JlZHMuc2VjcmV0VmFsdWVGcm9tSnNvbigndGVuZGVybHktYWNjZXNzLWtleScpLnRvU3RyaW5nKCksXG4gICAgICB1bmljb3JuU2VjcmV0OiB1bmljb3JuU2VjcmV0cy5zZWNyZXRWYWx1ZUZyb21Kc29uKCdkZWJ1Zy1jb25maWctdW5pY29ybi1rZXknKS50b1N0cmluZygpLFxuICAgIH0pXG5cbiAgICBjb25zdCBwcm9kVXNFYXN0MkFwcFN0YWdlID0gcGlwZWxpbmUuYWRkU3RhZ2UocHJvZFVzRWFzdDJTdGFnZSlcblxuICAgIHRoaXMuYWRkSW50ZWdUZXN0cyhjb2RlLCBwcm9kVXNFYXN0MlN0YWdlLCBwcm9kVXNFYXN0MkFwcFN0YWdlKVxuXG4gICAgY29uc3Qgc2xhY2tDaGFubmVsID0gY2hhdGJvdC5TbGFja0NoYW5uZWxDb25maWd1cmF0aW9uLmZyb21TbGFja0NoYW5uZWxDb25maWd1cmF0aW9uQXJuKFxuICAgICAgdGhpcyxcbiAgICAgICdTbGFja0NoYW5uZWwnLFxuICAgICAgJ2Fybjphd3M6Y2hhdGJvdDo6NjQ0MDM5ODE5MDAzOmNoYXQtY29uZmlndXJhdGlvbi9zbGFjay1jaGFubmVsL2VuZy1vcHMtc2xhY2stY2hhdGJvdCdcbiAgICApXG5cbiAgICBwaXBlbGluZS5idWlsZFBpcGVsaW5lKClcbiAgICBwaXBlbGluZS5waXBlbGluZS5ub3RpZnlPbignTm90aWZ5U2xhY2snLCBzbGFja0NoYW5uZWwsIHtcbiAgICAgIGV2ZW50czogW1BpcGVsaW5lTm90aWZpY2F0aW9uRXZlbnRzLlBJUEVMSU5FX0VYRUNVVElPTl9GQUlMRURdLFxuICAgIH0pXG4gIH1cblxuICBwcml2YXRlIGFkZEludGVnVGVzdHMoXG4gICAgc291cmNlQXJ0aWZhY3Q6IGNkay5waXBlbGluZXMuQ29kZVBpcGVsaW5lU291cmNlLFxuICAgIHJvdXRpbmdBUElTdGFnZTogUm91dGluZ0FQSVN0YWdlLFxuICAgIGFwcGxpY2F0aW9uU3RhZ2U6IGNkay5waXBlbGluZXMuU3RhZ2VEZXBsb3ltZW50XG4gICkge1xuICAgIGNvbnN0IHRlc3RBY3Rpb24gPSBuZXcgQ29kZUJ1aWxkU3RlcChgSW50ZWdUZXN0cy0ke3JvdXRpbmdBUElTdGFnZS5zdGFnZU5hbWV9YCwge1xuICAgICAgcHJvamVjdE5hbWU6IGBJbnRlZ1Rlc3RzLSR7cm91dGluZ0FQSVN0YWdlLnN0YWdlTmFtZX1gLFxuICAgICAgaW5wdXQ6IHNvdXJjZUFydGlmYWN0LFxuICAgICAgZW52RnJvbUNmbk91dHB1dHM6IHtcbiAgICAgICAgVU5JU1dBUF9ST1VUSU5HX0FQSTogcm91dGluZ0FQSVN0YWdlLnVybCxcbiAgICAgIH0sXG4gICAgICBidWlsZEVudmlyb25tZW50OiB7XG4gICAgICAgIGVudmlyb25tZW50VmFyaWFibGVzOiB7XG4gICAgICAgICAgTlBNX1RPS0VOOiB7XG4gICAgICAgICAgICB2YWx1ZTogJ25wbS1wcml2YXRlLXJlcG8tYWNjZXNzLXRva2VuJyxcbiAgICAgICAgICAgIHR5cGU6IEJ1aWxkRW52aXJvbm1lbnRWYXJpYWJsZVR5cGUuU0VDUkVUU19NQU5BR0VSLFxuICAgICAgICAgIH0sXG4gICAgICAgICAgQVJDSElWRV9OT0RFX1JQQzoge1xuICAgICAgICAgICAgdmFsdWU6ICdhcmNoaXZlLW5vZGUtcnBjLXVybC1kZWZhdWx0LWttcycsXG4gICAgICAgICAgICB0eXBlOiBCdWlsZEVudmlyb25tZW50VmFyaWFibGVUeXBlLlNFQ1JFVFNfTUFOQUdFUixcbiAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgfSxcbiAgICAgIGNvbW1hbmRzOiBbXG4gICAgICAgICdlY2hvIFwiLy9yZWdpc3RyeS5ucG1qcy5vcmcvOl9hdXRoVG9rZW49JHtOUE1fVE9LRU59XCIgPiAubnBtcmMgJiYgbnBtIGNpJyxcbiAgICAgICAgJ2VjaG8gXCJVTklTV0FQX1JPVVRJTkdfQVBJPSR7VU5JU1dBUF9ST1VUSU5HX0FQSX1cIiA+IC5lbnYnLFxuICAgICAgICAnZWNobyBcIkFSQ0hJVkVfTk9ERV9SUEM9JHtBUkNISVZFX05PREVfUlBDfVwiID4+IC5lbnYnLFxuICAgICAgICAnbnBtIGluc3RhbGwnLFxuICAgICAgICAnbnBtIHJ1biBidWlsZCcsXG4gICAgICAgICducG0gcnVuIGludGVnLXRlc3QnLFxuICAgICAgXSxcbiAgICB9KVxuXG4gICAgYXBwbGljYXRpb25TdGFnZS5hZGRQb3N0KHRlc3RBY3Rpb24pXG4gIH1cbn1cblxuY29uc3QgYXBwID0gbmV3IGNkay5BcHAoKVxuXG5jb25zdCBqc29uUnBjUHJvdmlkZXJzID0ge1xuICBXRUIzX1JQQ18xOiBwcm9jZXNzLmVudi5KU09OX1JQQ19QUk9WSURFUl8xISxcbiAgV0VCM19SUENfMzogcHJvY2Vzcy5lbnYuSlNPTl9SUENfUFJPVklERVJfMyEsXG4gIFdFQjNfUlBDXzQ6IHByb2Nlc3MuZW52LkpTT05fUlBDX1BST1ZJREVSXzQhLFxuICBXRUIzX1JQQ181OiBwcm9jZXNzLmVudi5KU09OX1JQQ19QUk9WSURFUl81ISxcbiAgV0VCM19SUENfNDI6IHByb2Nlc3MuZW52LkpTT05fUlBDX1BST1ZJREVSXzQyISxcbiAgV0VCM19SUENfMTA6IHByb2Nlc3MuZW52LkpTT05fUlBDX1BST1ZJREVSXzEwISxcbiAgV0VCM19SUENfNjk6IHByb2Nlc3MuZW52LkpTT05fUlBDX1BST1ZJREVSXzY5ISxcbiAgV0VCM19SUENfNDIxNjE6IHByb2Nlc3MuZW52LkpTT05fUlBDX1BST1ZJREVSXzQyMTYxISxcbiAgV0VCM19SUENfNDIxNjExOiBwcm9jZXNzLmVudi5KU09OX1JQQ19QUk9WSURFUl80MjE2MTEhLFxuICBXRUIzX1JQQ18xMTE1NTExMTogcHJvY2Vzcy5lbnYuSlNPTl9SUENfUFJPVklERVJfMTExNTUxMTEhLFxuICBXRUIzX1JQQ180MjE2MTM6IHByb2Nlc3MuZW52LkpTT05fUlBDX1BST1ZJREVSXzQyMTYxMyEsXG4gIFdFQjNfUlBDXzEzNzogcHJvY2Vzcy5lbnYuSlNPTl9SUENfUFJPVklERVJfMTM3ISxcbiAgV0VCM19SUENfODAwMDE6IHByb2Nlc3MuZW52LkpTT05fUlBDX1BST1ZJREVSXzgwMDAxISxcbiAgV0VCM19SUENfOTc6IHByb2Nlc3MuZW52LkpTT05fUlBDX1BST1ZJREVSXzk3ISxcbiAgV0VCM19SUENfNDIyMjA6IHByb2Nlc3MuZW52LkpTT05fUlBDX1BST1ZJREVSXzQyMjIwISxcbiAgV0VCM19SUENfNDQ3ODc6IHByb2Nlc3MuZW52LkpTT05fUlBDX1BST1ZJREVSXzQ0Nzg3ISxcbiAgV0VCM19SUENfNTY6IHByb2Nlc3MuZW52LkpTT05fUlBDX1BST1ZJREVSXzU2ISxcbiAgV0VCM19SUENfNDMxMTQ6IHByb2Nlc3MuZW52LkpTT05fUlBDX1BST1ZJREVSXzQzMTE0ISxcbiAgV0VCM19SUENfODQ1MzogcHJvY2Vzcy5lbnYuSlNPTl9SUENfUFJPVklERVJfODQ1MyEsXG59XG5cbi8vIExvY2FsIGRldiBzdGFja1xubmV3IFJvdXRpbmdBUElTdGFjayhhcHAsICdSb3V0aW5nQVBJU3RhY2snLCB7XG4gIGpzb25ScGNQcm92aWRlcnM6IGpzb25ScGNQcm92aWRlcnMsXG4gIHByb3Zpc2lvbmVkQ29uY3VycmVuY3k6IHByb2Nlc3MuZW52LlBST1ZJU0lPTl9DT05DVVJSRU5DWSA/IHBhcnNlSW50KHByb2Nlc3MuZW52LlBST1ZJU0lPTl9DT05DVVJSRU5DWSkgOiAwLFxuICB0aHJvdHRsaW5nT3ZlcnJpZGU6IHByb2Nlc3MuZW52LlRIUk9UVExFX1BFUl9GSVZFX01JTlMsXG4gIGV0aEdhc1N0YXRpb25JbmZvVXJsOiBwcm9jZXNzLmVudi5FVEhfR0FTX1NUQVRJT05fSU5GT19VUkwhLFxuICBjaGF0Ym90U05TQXJuOiBwcm9jZXNzLmVudi5DSEFUQk9UX1NOU19BUk4sXG4gIHN0YWdlOiBTVEFHRS5MT0NBTCxcbiAgaW50ZXJuYWxBcGlLZXk6ICd0ZXN0LWFwaS1rZXknLFxuICByb3V0ZTUzQXJuOiBwcm9jZXNzLmVudi5ST0xFX0FSTixcbiAgcGluYXRhX2tleTogcHJvY2Vzcy5lbnYuUElOQVRBX0FQSV9LRVkhLFxuICBwaW5hdGFfc2VjcmV0OiBwcm9jZXNzLmVudi5QSU5BVEFfQVBJX1NFQ1JFVCEsXG4gIGhvc3RlZF96b25lOiBwcm9jZXNzLmVudi5IT1NURURfWk9ORSEsXG4gIHRlbmRlcmx5VXNlcjogcHJvY2Vzcy5lbnYuVEVOREVSTFlfVVNFUiEsXG4gIHRlbmRlcmx5UHJvamVjdDogcHJvY2Vzcy5lbnYuVEVOREVSTFlfUFJPSkVDVCEsXG4gIHRlbmRlcmx5QWNjZXNzS2V5OiBwcm9jZXNzLmVudi5URU5ERVJMWV9BQ0NFU1NfS0VZISxcbiAgdW5pY29yblNlY3JldDogcHJvY2Vzcy5lbnYuVU5JQ09STl9TRUNSRVQhLFxufSlcblxubmV3IFJvdXRpbmdBUElQaXBlbGluZShhcHAsICdSb3V0aW5nQVBJUGlwZWxpbmVTdGFjaycsIHtcbiAgZW52OiB7IGFjY291bnQ6ICc2OTcxODQ0MjAwNDgnLCByZWdpb246ICd1cy1lYXN0LTInIH0sXG59KVxuIl19