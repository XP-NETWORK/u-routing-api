import { MixedRoute, V2Route, V3Route } from '@uniswap/smart-order-router/build/main/routers';
import { Protocol } from '@uniswap/router-sdk';
import { TokenMarshaller } from './token-marshaller';
import { PairMarshaller } from './pair-marshaller';
import { PoolMarshaller } from './pool-marshaller';
import { Pool } from '@uniswap/v3-sdk';
export class RouteMarshaller {
    static marshal(route) {
        switch (route.protocol) {
            case Protocol.V2:
                return {
                    protocol: Protocol.V2,
                    input: TokenMarshaller.marshal(route.input),
                    output: TokenMarshaller.marshal(route.output),
                    pairs: route.pairs.map((pair) => PairMarshaller.marshal(pair)),
                };
            case Protocol.V3:
                return {
                    protocol: Protocol.V3,
                    input: TokenMarshaller.marshal(route.input),
                    output: TokenMarshaller.marshal(route.output),
                    pools: route.pools.map((pool) => PoolMarshaller.marshal(pool)),
                };
            case Protocol.MIXED:
                return {
                    protocol: Protocol.MIXED,
                    input: TokenMarshaller.marshal(route.input),
                    output: TokenMarshaller.marshal(route.output),
                    pools: route.pools.map((tpool) => {
                        if (tpool instanceof Pool) {
                            return PoolMarshaller.marshal(tpool);
                        }
                        else {
                            return PairMarshaller.marshal(tpool);
                        }
                    }),
                };
        }
    }
    static unmarshal(marshalledRoute) {
        switch (marshalledRoute.protocol) {
            case Protocol.V2:
                const v2Route = marshalledRoute;
                return new V2Route(v2Route.pairs.map((marshalledPair) => PairMarshaller.unmarshal(marshalledPair)), TokenMarshaller.unmarshal(v2Route.input), TokenMarshaller.unmarshal(v2Route.output));
            case Protocol.V3:
                const v3Route = marshalledRoute;
                return new V3Route(v3Route.pools.map((marshalledPool) => PoolMarshaller.unmarshal(marshalledPool)), TokenMarshaller.unmarshal(v3Route.input), TokenMarshaller.unmarshal(v3Route.output));
            case Protocol.MIXED:
                const mixedRoute = marshalledRoute;
                const tpools = mixedRoute.pools.map((tpool) => {
                    if (tpool.protocol === Protocol.V2) {
                        return PairMarshaller.unmarshal(tpool);
                    }
                    else {
                        return PoolMarshaller.unmarshal(tpool);
                    }
                });
                return new MixedRoute(tpools, TokenMarshaller.unmarshal(mixedRoute.input), TokenMarshaller.unmarshal(mixedRoute.output));
        }
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicm91dGUtbWFyc2hhbGxlci5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL2xpYi9oYW5kbGVycy9tYXJzaGFsbGluZy9yb3V0ZS1tYXJzaGFsbGVyLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBRSxVQUFVLEVBQUUsT0FBTyxFQUFFLE9BQU8sRUFBRSxNQUFNLGdEQUFnRCxDQUFBO0FBQzdGLE9BQU8sRUFBRSxRQUFRLEVBQUUsTUFBTSxxQkFBcUIsQ0FBQTtBQUM5QyxPQUFPLEVBQW1CLGVBQWUsRUFBRSxNQUFNLG9CQUFvQixDQUFBO0FBQ3JFLE9BQU8sRUFBa0IsY0FBYyxFQUFFLE1BQU0sbUJBQW1CLENBQUE7QUFDbEUsT0FBTyxFQUFrQixjQUFjLEVBQUUsTUFBTSxtQkFBbUIsQ0FBQTtBQUNsRSxPQUFPLEVBQUUsSUFBSSxFQUFFLE1BQU0saUJBQWlCLENBQUE7QUF5QnRDLE1BQU0sT0FBTyxlQUFlO0lBQ25CLE1BQU0sQ0FBQyxPQUFPLENBQUMsS0FBcUM7UUFDekQsUUFBUSxLQUFLLENBQUMsUUFBUSxFQUFFO1lBQ3RCLEtBQUssUUFBUSxDQUFDLEVBQUU7Z0JBQ2QsT0FBTztvQkFDTCxRQUFRLEVBQUUsUUFBUSxDQUFDLEVBQUU7b0JBQ3JCLEtBQUssRUFBRSxlQUFlLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUM7b0JBQzNDLE1BQU0sRUFBRSxlQUFlLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUM7b0JBQzdDLEtBQUssRUFBRSxLQUFLLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDLElBQUksRUFBRSxFQUFFLENBQUMsY0FBYyxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQztpQkFDL0QsQ0FBQTtZQUNILEtBQUssUUFBUSxDQUFDLEVBQUU7Z0JBQ2QsT0FBTztvQkFDTCxRQUFRLEVBQUUsUUFBUSxDQUFDLEVBQUU7b0JBQ3JCLEtBQUssRUFB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dGUgfSBmcm9tICdAdW5pc3dhcC9zbWFydC1vcmRlci1yb3V0ZXIvYnVpbGQvbWFpbi9yb3V0ZXJzJ1xuaW1wb3J0IHsgUHJvdG9jb2wgfSBmcm9tICdAdW5pc3dhcC9yb3V0ZXItc2RrJ1xuaW1wb3J0IHsgTWFyc2hhbGxlZFRva2VuLCBUb2tlbk1hcnNoYWxsZXIgfSBmcm9tICcuL3Rva2VuLW1hcnNoYWxsZXInXG5pbXBvcnQgeyBNYXJzaGFsbGVkUGFpciwgUGFpck1hcnNoYWxsZXIgfSBmcm9tICcuL3BhaXItbWFyc2hhbGxlcidcbmltcG9ydCB7IE1hcnNoYWxsZWRQb29sLCBQb29sTWFyc2hhbGxlciB9IGZyb20gJy4vcG9vbC1tYXJzaGFsbGVyJ1xuaW1wb3J0IHsgUG9vbCB9IGZyb20gJ0B1bmlzd2FwL3YzLXNkaydcblxuZXhwb3J0IGludGVyZmFjZSBNYXJzaGFsbGVkVjJSb3V0ZSB7XG4gIHByb3RvY29sOiBQcm90b2NvbFxuICBpbnB1dDogTWFyc2hhbGxlZFRva2VuXG4gIG91dHB1dDogTWFyc2hhbGxlZFRva2VuXG4gIHBhaXJzOiBNYXJzaGFsbGVkUGFpcltdXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgTWFyc2hhbGxlZFYzUm91dGUge1xuICBwcm90b2NvbDogUHJvdG9jb2xcbiAgaW5wdXQ6IE1hcnNoYWxsZWRUb2tlblxuICBvdXRwdXQ6IE1hcnNoYWxsZWRUb2tlblxuICBwb29sczogTWFyc2hhbGxlZFBvb2xbXVxufVxuXG5leHBvcnQgaW50ZXJmYWNlIE1hcnNoYWxsZWRNaXhlZFJvdXRlIHtcbiAgcHJvdG9jb2w6IFByb3RvY29sXG4gIGlucHV0OiBNYXJzaGFsbGVkVG9rZW5cbiAgb3V0cHV0OiBNYXJzaGFsbGVkVG9rZW5cbiAgcG9vbHM6IChNYXJzaGFsbGVkUG9vbCB8IE1hcnNoYWxsZWRQYWlyKVtdXG59XG5cbmV4cG9ydCB0eXBlIE1hcnNoYWxsZWRSb3V0ZSA9IE1hcnNoYWxsZWRWMlJvdXRlIHwgTWFyc2hhbGxlZFYzUm91dGUgfCBNYXJzaGFsbGVkTWl4ZWRSb3V0ZVxuXG5leHBvcnQgY2xhc3MgUm91dGVNYXJzaGFsbGVyIHtcbiAgcHVibGljIHN0YXRpYyBtYXJzaGFsKHJvdXRlOiBWM1JvdXRlIHwgVjJSb3V0ZSB8IE1peGVkUm91dGUpOiBNYXJzaGFsbGVkUm91dGUge1xuICAgIHN3aXRjaCAocm91dGUucHJvdG9jb2wpIHtcbiAgICAgIGNhc2UgUHJvdG9jb2wuVjI6XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgcHJvdG9jb2w6IFByb3RvY29sLlYyLFxuICAgICAgICAgIGlucHV0OiBUb2tlbk1hcnNoYWxsZXIubWFyc2hhbChyb3V0ZS5pbnB1dCksXG4gICAgICAgICAgb3V0cHV0OiBUb2tlbk1hcnNoYWxsZXIubWFyc2hhbChyb3V0ZS5vdXRwdXQpLFxuICAgICAgICAgIHBhaXJzOiByb3V0ZS5wYWlycy5tYXAoKHBhaXIpID0+IFBhaXJNYXJzaGFsbGVyLm1hcnNoYWwocGFpcikpLFxuICAgICAgICB9XG4gICAgICBjYXNlIFByb3RvY29sLlYzOlxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHByb3RvY29sOiBQcm90b2NvbC5WMyxcbiAgICAgICAgICBpbnB1dDogVG9rZW5NYXJzaGFsbGVyLm1hcnNoYWwocm91dGUuaW5wdXQpLFxuICAgICAgICAgIG91dHB1dDogVG9rZW5NYXJzaGFsbGVyLm1hcnNoYWwocm91dGUub3V0cHV0KSxcbiAgICAgICAgICBwb29sczogcm91dGUucG9vbHMubWFwKChwb29sKSA9PiBQb29sTWFyc2hhbGxlci5tYXJzaGFsKHBvb2wpKSxcbiAgICAgICAgfVxuICAgICAgY2FzZSBQcm90b2NvbC5NSVhFRDpcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBwcm90b2NvbDogUHJvdG9jb2wuTUlYRUQsXG4gICAgICAgICAgaW5wdXQ6IFRva2VuTWFyc2hhbGxlci5tYXJzaGFsKHJvdXRlLmlucHV0KSxcbiAgICAgICAgICBvdXRwdXQ6IFRva2VuTWFyc2hhbGxlci5tYXJzaGFsKHJvdXRlLm91dHB1dCksXG4gICAgICAgICAgcG9vbHM6IHJvdXRlLnBvb2xzLm1hcCgodHBvb2wpID0+IHtcbiAgICAgICAgICAgIGlmICh0cG9vbCBpbnN0YW5jZW9mIFBvb2wpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIFBvb2xNYXJzaGFsbGVyLm1hcnNoYWwodHBvb2wpXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICByZXR1cm4gUGFpck1hcnNoYWxsZXIubWFyc2hhbCh0cG9vbClcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KSxcbiAgICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBzdGF0aWMgdW5tYXJzaGFsKG1hcnNoYWxsZWRSb3V0ZTogTWFyc2hhbGxlZFJvdXRlKTogVjNSb3V0ZSB8IFYyUm91dGUgfCBNaXhlZFJvdXRlIHtcbiAgICBzd2l0Y2ggKG1hcnNoYWxsZWRSb3V0ZS5wcm90b2NvbCkge1xuICAgICAgY2FzZSBQcm90b2NvbC5WMjpcbiAgICAgICAgY29uc3QgdjJSb3V0ZSA9IG1hcnNoYWxsZWRSb3V0ZSBhcyBNYXJzaGFsbGVkVjJSb3V0ZVxuICAgICAgICByZXR1cm4gbmV3IFYyUm91dGUoXG4gICAgICAgICAgdjJSb3V0ZS5wYWlycy5tYXAoKG1hcnNoYWxsZWRQYWlyKSA9PiBQYWlyTWFyc2hhbGxlci51bm1hcnNoYWwobWFyc2hhbGxlZFBhaXIpKSxcbiAgICAgICAgICBUb2tlbk1hcnNoYWxsZXIudW5tYXJzaGFsKHYyUm91dGUuaW5wdXQpLFxuICAgICAgICAgIFRva2VuTWFyc2hhbGxlci51bm1hcnNoYWwodjJSb3V0ZS5vdXRwdXQpXG4gICAgICAgIClcbiAgICAgIGNhc2UgUHJvdG9jb2wuVjM6XG4gICAgICAgIGNvbnN0IHYzUm91dGUgPSBtYXJzaGFsbGVkUm91dGUgYXMgTWFyc2hhbGxlZFYzUm91dGVcbiAgICAgICAgcmV0dXJuIG5ldyBWM1JvdXRlKFxuICAgICAgICAgIHYzUm91dGUucG9vbHMubWFwKChtYXJzaGFsbGVkUG9vbCkgPT4gUG9vbE1hcnNoYWxsZXIudW5tYXJzaGFsKG1hcnNoYWxsZWRQb29sKSksXG4gICAgICAgICAgVG9rZW5NYXJzaGFsbGVyLnVubWFyc2hhbCh2M1JvdXRlLmlucHV0KSxcbiAgICAgICAgICBUb2tlbk1hcnNoYWxsZXIudW5tYXJzaGFsKHYzUm91dGUub3V0cHV0KVxuICAgICAgICApXG4gICAgICBjYXNlIFByb3RvY29sLk1JWEVEOlxuICAgICAgICBjb25zdCBtaXhlZFJvdXRlID0gbWFyc2hhbGxlZFJvdXRlIGFzIE1hcnNoYWxsZWRNaXhlZFJvdXRlXG4gICAgICAgIGNvbnN0IHRwb29scyA9IG1peGVkUm91dGUucG9vbHMubWFwKCh0cG9vbCkgPT4ge1xuICAgICAgICAgIGlmICh0cG9vbC5wcm90b2NvbCA9PT0gUHJvdG9jb2wuVjIpIHtcbiAgICAgICAgICAgIHJldHVybiBQYWlyTWFyc2hhbGxlci51bm1hcnNoYWwodHBvb2wgYXMgTWFyc2hhbGxlZFBhaXIpXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBQb29sTWFyc2hhbGxlci51bm1hcnNoYWwodHBvb2wgYXMgTWFyc2hhbGxlZFBvb2wpXG4gICAgICAgICAgfVxuICAgICAgICB9KVxuXG4gICAgICAgIHJldHVybiBuZXcgTWl4ZWRSb3V0ZShcbiAgICAgICAgICB0cG9vbHMsXG4gICAgICAgICAgVG9rZW5NYXJzaGFsbGVyLnVubWFyc2hhbChtaXhlZFJvdXRlLmlucHV0KSxcbiAgICAgICAgICBUb2tlbk1hcnNoYWxsZXIudW5tYXJzaGFsKG1peGVkUm91dGUub3V0cHV0KVxuICAgICAgICApXG4gICAgfVxuICB9XG59XG4iXX0=